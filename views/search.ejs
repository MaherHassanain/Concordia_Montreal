<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="./javascripts/style.js"></script>
    <script src="jquery-3.5.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body id="search" data-spy="scroll" data-target=".navbar" data-offset="60">

<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
<!--                <span class="icon-bar"></span>-->
<!--                <span class="icon-bar"></span>-->
            </button>
            <a class="navbar-brand" href="/">Logo</a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/">HOME PAGE</a></li>
                <!--                <li><a href="#services">SERVICES</a></li>-->
<!--                <li><a href="#sponsors">SPONSORS</a></li>-->
<!--                <li><a href="#project">PROJECT</a></li>-->
<!--                <li><a href="#support">SUPPORT US</a></li>-->
            </ul>
        </div>
    </div>
</nav>


<div class="jumbotron text-center">
    <h1>ASTROBIO</h1>
    <p>Differential gene expression analysis on control vs microgravity induced samples</p>
    <br>
    <form method="post" action="/">
        <div class="row">
            <div class="col-sm-6 container-fluid">
                <!--                <div class="form-group container">-->
                <!--                    <label for="organism" class="text-left">Organism</label>-->
                <!--                    <input type="search" class="form-control" name="organism" placeholder="Ex: Yeast">-->
                <label for="geneSymbol">Gene Symbol</label>
                <input type="search" class="form-control" name="geneSymbol" placeholder="Gene Symbol Ex: HSP30">
                <br>
                <label for="species">Species</label>
                <input type="search" class="form-control" name="species" placeholder="Species name Ex: Saccharomyces cerevisiae">
                <br>
                <div style="display: none" id="myDIV">
                    <label for="fc">Fold Change</label>
                    <select class="form-control" id="fc" name="fc">
                        <option>ALL</option>
                        <option>Up</option>
                        <option>Down</option>
                        <option>Unaffected</option>
                    </select>
                    <br>
                    <label for="organism">Organism </label>
                    <select class="form-control" id="organism" name="organism">
                        <option>ALL</option>
                        <option>Human</option>
                        <option>Yeast</option>
                        <option>Bacteria</option>
                    </select>
                </div>
                <!--                </div>-->
            </div>
            <div class="col-sm-6 container-fluid">
                <!--                <div class="input-group">-->
                <!--                    <label for="organism" class="text-left">Organism</label>-->
                <!--                    <input type="search" class="form-control" name="organism" placeholder="Ex: Yeast">-->
                <label for="EGEOD">E-GEOD Number</label>
                <input type="search" class="form-control" name="EGEOD" placeholder="Accession #">
                <br>
                <label for="adjpval">Platform Open Reading Frame</label>
                <input type="search" class="form-control" name="adjpval" placeholder="Platform ORF Ex: YLR406C">
                <div style="display: none" id="myDIV2">
                    <br>
                    <label for="studyType">StudyType</label>
                    <select class="form-control" id="studyType" name="studyType">
                        <option>ALL</option>
                        <option>HARV</option>
                        <option>RPM</option>
                        <option>SPACEFLOWN</option>
                        <option>HYPERBOLIC</option>
                    </select>
                    <br>
                    <label for="assayType">Assay Type</label>
                    <select class="form-control" id="assayType" name="assayType">
                        <option>ALL</option>
                        <option>Microarray</option>
                        <option>RNAseq</option>
                    </select>
                </div>
                <!--                </div>-->
            </div>
        </div>
        <button type="button" onclick="myFunction();myFunction2();myFunction3()" class="btn btn-primary container"><div id="BTNT">Show More Options</div> </button>
        <button type="submit" class="btn btn-danger container"> Submit </button>
    </form>

    <!--    <form>-->
    <!--        <div class="input-group">-->
    <!--            <input type="email" class="form-control" size="50" placeholder="Email Address" required>-->
    <!--            <div class="input-group-btn">-->
    <!--                <button type="button" class="btn btn-danger">Subscribe</button>-->
    <!--            </div>-->
    <!--        </div>-->
    <!--    </form>-->
</div>


<div class="container-fluid text-center">
    <% if (Array.isArray(data)) { %>
        <% // display list (loop for doc number)
        for (var i = 0; i <data.length; i++) { %>
            <table class="table" style="width:100%;">
                <thead>
                <tr>
                    <th class="colwidth text-center">Gene</th>
                    <th class="colwidth text-center">Adjusted P Value</th>
                    <th class="colwidth text-center">LogFC</th>
                    <th class="colwidth text-center">E-GEOD</th>
                    <th class="colwidth text-center">Species</th>
                    <th class="colwidth text-center">Generation</th>
                    <th class="colwidth text-center">More info</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="colwidth"><%= data[i].Gene.symbol %></td>
                    <td class="colwidth"><%= data[i].adj.P.Val %></td>
                    <td class="colwidth"><%= data[i].logFC %></td>
                    <td class="colwidth"><%= data[i].EGEOD %></td>
                    <td class="colwidth"><%= data[i].Species %></td>
                    <%if(data[i].Gen === "0") { %>
                        <td>Not Specified</td>
                   <%  } else { %>
                        <td class="colwidth"><%= data[i].Gen %></td>
                  <%  }%>
                    <td class="colwidth"><!-- Button trigger modal -->
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#ResultsModal<%=i%>">
                            Select
                        </button>

                        <!-- Modal -->
                        <div class="modal fade" id="ResultsModal<%=i%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h3 class="modal-title" id="exampleModalLabel"><%= data[i].Gene.symbol%> </h3>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body text-left">
                                        <h4>Results</h4>
                                        <hr>
                                        <p> P Value : <%=data[i].P.Value%> </p>
                                        <p> Adjusted P Value : <%=data[i].adj.P.Val%> </p>
                                        <p> LogFC : <%=data[i].logFC%> </p>
                                        <p> t : <%=data[i].t%> </p>
                                        <p> B : <%=data[i].B%> </p>
                                        <p> Gene title : <%=data[i].Gene.title%> </p>
                                        <p> Platform_ORF : <%=data[i].Platform_ORF%></p>
                                        <p> Chromosome annotation : <%=data[i].Chromosome.annotation%> </p>
                                        <p> GO Function : <%=data[i].GO.Function%></p>
                                        <p> GO Process : <%=data[i].GO.Process%></p>
                                        <p> GO Component : <%=data[i].GO.Component%></p>
                                        <p> Organism : <%=data[i].Organism%> </p>
                                        <p> Species : <%=data[i].Species%> </p>
                                        <p> Strain : <%=data[i].Strain%> </p>
                                        <p> E-GEOD : <%=data[i].EGEOD%> </p>
                                        <p> Study Generation : <%=data[i].Gen%> </p>
                                        <hr>
                                        <h4>Experiment Information</h4>
                                        <hr>
                                        <% if(data[i].meta_data === "0") { %>
                                        <p> Study Title : <%=metaData0[0].Title%></p>
                                        <p> Treatments : <%=metaData0[0].treatment%>, <%=metaData0[1].treatment%>, <%=metaData0[2].treatment%>, <%=metaData0[3].treatment%>, <%=metaData0[4].treatment%> and <%=metaData0[5].treatment%></p>
                                        <p> Platform ID : <%=metaData0[0].PlatformID%></p>
                                        <p> PMID : <%=metaData0[0].PMIDs%></p>
                                        <p> Experimenter: <%=metaData0[0].Experimenter%></p>
                                        <p> Institute: <%=metaData0[0].Institute%></p>
                                        <p> Control sample description and accessions: <%= metaData0[0].description%> <%= metaData0[0].accesssions %> <%= metaData0[1].accesssions%> <%=metaData0[2].accesssions%> </p>
                                        <p> Microgravity sample description and accessions: <%=metaData0[3].description%> <%= metaData0[3].accesssions%> <%= metaData0[4].accesssions%> <%= metaData0[5].accesssions%></p>
                                        <p> Design: <%= metaData0[0].Design%></p>
                                        <p> Study summary: <%= metaData0[0].Summary%></p>
                                        <p> Link to the study: <a href="<%=metaData0[0].URL%>">Click here</a> </p>
                                      <%  } else if(data[i].meta_data === "1") { %>
                                        <p> Study Title : <%=metaData1[0].Title%></p>
                                        <p> Treatments : <%=metaData1[0].treatment%>, <%=metaData1[1].treatment%>, <%=metaData1[2].treatment%>, <%=metaData1[3].treatment%>, <%=metaData1[4].treatment%> and <%=metaData1[5].treatment%></p>
                                        <p> Platform ID : <%=metaData1[0].PlatformID%></p>
                                        <p> PMID : <%=metaData1[0].PMIDs%></p>
                                        <p> Experimenter: <%=metaData1[0].Experimenter%></p>
                                        <p> Institute: <%=metaData1[0].Institute%></p>
                                        <p> Control sample description and accessions: <%= metaData1[0].description%> <%= metaData1[0].accesssions %> <%= metaData1[1].accesssions%> <%=metaData1[2].accesssions%> </p>
                                        <p> Microgravity sample description and accessions: <%=metaData1[3].description%> <%= metaData1[3].accesssions%> <%= metaData1[4].accesssions%> <%= metaData1[5].accesssions%></p>
                                        <p> Design: <%= metaData1[0].Design%></p>
                                        <p> Study summary: <%= metaData1[0].Summary%></p>
                                        <p> Link to the study: <a href="<%=metaData1[0].URL%>">Click here</a> </p>
                                  <%    }  else if(data[i].meta_data === "2"){ %>
                                        <p> Study Title : <%=metaData2[0].Title%></p>
                                        <p> Treatments : <%=metaData2[0].treatment%>, <%=metaData2[1].treatment%>, <%=metaData2[2].treatment%>, <%=metaData2[3].treatment%>, <%=metaData2[4].treatment%> and <%=metaData2[5].treatment%></p>
                                        <p> Platform ID : <%=metaData2[0].PlatformID%></p>
                                        <p> PMID : <%=metaData2[0].PMIDs%></p>
                                        <p> Experimenter: <%=metaData2[0].Experimenter%></p>
                                        <p> Institute: <%=metaData2[0].Institute%></p>
                                        <p> Control sample description and accessions: <%= metaData2[0].description%> <%= metaData2[0].accesssions %> <%= metaData2[1].accesssions%> <%=metaData2[2].accesssions%> </p>
                                        <p> Microgravity sample description and accessions: <%=metaData2[3].description%> <%= metaData2[3].accesssions%> <%= metaData2[4].accesssions%> <%= metaData2[5].accesssions%></p>
                                        <p> Design: <%= metaData2[0].Design%></p>
                                        <p> Study summary: <%= metaData2[0].Summary%></p>
                                        <p> Link to the study: <a href="<%=metaData2[0].URL%>">Click here</a> </p>
                                <%  } else {

                                }%>

                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                        <!--                            <button type="button" class="btn btn-primary">Save changes</button>-->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        <%  } %>
    <% } else { %>
        <h3><%=data%></h3>
    <% }%>
</div>

<!--<footer>-->
<!--    <p>Author: Maher Hassanain<br>-->
<!--        <a href="mailto:hege@example.com">mah_has@encs.concordia.ca</a></p>-->
<!--</footer>-->

<!-- Footer -->
<footer class="container-fluid text-center bg-grey">
    <a href="#search" title="To Top">
        <span class="glyphicon glyphicon-chevron-up"></span>
    </a>
    <p>footer</p>
</footer>
<!--<footer class="page-footer font-small blue">-->
<!--    <div class="footer-copyright text-center py-3">© 2020 Created by Maher Hassanain. All Rights Reserved.-->
<!--        <p> DE Analysis: Benjamin Clark</p>-->
<!--        <br>-->
<!--        <br>-->
<!--    </div>-->
<!--</footer>-->

</body>


<!--<nav class="navbar navbar-inverse">-->
<!--    <div class="container-fluid">-->
<!--        <div class="navbar-header">-->
<!--            <a class="navbar-brand" href="#">A Yeast Odyssey </a>-->
<!--        </div>-->
<!--        <ul class="nav navbar-nav">-->
<!--            &lt;!&ndash;      <li class="active"><a href="#">Home</a></li>&ndash;&gt;-->
<!--        </ul>-->
<!--    </div>-->
<!--</nav>-->


<!--<div class="jumbotron text-center">-->
<!--    <img src="../images/astroyeast.png" class="img-rounded" alt="Logo" >-->
<!--    &lt;!&ndash;  <h1> </h1>&ndash;&gt;-->
<!--</div>-->

<!--<div class="container">-->
<!--    <div class="row">-->
<!--        <div class="form-group">-->
<!--            <label for="txt">Search for a Gene:</label>-->
<!--            <form method="post" action="/">-->
<!--                <input type="search" class="form-control" name="txt">-->
<!--                <br>-->
<!--                <button type="submit" class="btn btn-primary"> Submit </button>-->
<!--            </form>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!--<div class="container">-->
<!--    <div class="row">-->
<!--        <div class="form-group">-->
<!--            <label for="txt">Search for a Gene:</label>-->
<!--            <br>-->
<!--            <form method="post" action="/">-->
<!--                <input type="search" class="form-control" name="txt" placeholder="Gene name. ex: PXR1">-->
<!--                &lt;!&ndash;      <input type="search" class="form-control" name="logfc" placeholder="Up or down">&ndash;&gt;-->
<!--                <div class="form-group">-->
<!--                    <label for="sel1"></label>-->
<!--                    <select class="form-control" id="sel1" name="sel1">-->
<!--                        <option>Up</option>-->
<!--                        <option>Down</option>-->
<!--                    </select>-->
<!--                </div>-->
<!--                <input type="search" class="form-control" name="adjpval" placeholder="Smallest adjusted P value accepted">-->
<!--                <br>-->
<!--&lt;!&ndash;                <input type="search" class="form-control" name="platORF" placeholder="Platform_ORF is placed here">&ndash;&gt;-->
<!--&lt;!&ndash;                <br>&ndash;&gt;-->
<!--                &lt;!&ndash;      <input type="search" class="form-control" name="maxp" placeholder="Max adjusted P value accepted">&ndash;&gt;-->
<!--                &lt;!&ndash;      <br>&ndash;&gt;-->
<!--                <button type="submit" class="btn btn-primary"> Submit </button>-->
<!--            </form>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->


<!-- Footer -->